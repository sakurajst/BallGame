# 修订记录

| 日期       | 版本 | 说明                                                  | 作者       |
| ---------- | ---- | ----------------------------------------------------- | ---------- |
| 2021.09.18 | V1.0 | 编写引言、系统需求概述部分                            | 周华丽     |
| 2021.09.18 | V1.1 | 编写功能需求、非功能需求部分                          | 沈之雯     |
| 2021.09.18 | V1.2 | 编写运行环境规定、验收验证标准和迭代Ⅰ阶段团队分工部分 | 钟桔爱     |
| 2021.09.19 | V2.0 | 整理并维护文档                                        | 周华丽     |
| 2021.10.11 | V2.1 | 修改各自编写的部分                                    | 周、沈、钟 |

# 1. 引言

## 1.1 编写目的

本文档的目的是详细地描述BallGame游戏项目的功能性需求和非功能性需求，预期读者有用户、项目经理、开发人员以及测试人员。以便用户能够了解预期的功能和性能，并对整个需求进行讨论和协商；项目经理能够了解预期产品的功能, 并据此进行系统设计和项目管理；开发人员能够根据需求进行编码；测试人员能够根据本文档编写测试用例及测试文档, 并对软件产品进行测试。

以下叙述将结合文字描述、UML图等来描述BallGame的功能、性能、用户界面、运行环境、外部接口以及针对用户操作给出的各种响应。

## 1.2 项目背景

都市中生活的人们总有或多或少的烦恼、压力、抑郁。而这款游戏模拟的正是一个充满正能量的你，身边充斥着负能量的人们，你需要接触他们，用你的正能量感染他们，他们也会用被你激发的正能量去鼓励下一个对生活苦恼着的人。有时总会有这样的一些人在你身边——浑浑噩噩、丧、自暴自弃。当你觉得你的力量不足以改变他们时，适当地远离他们能使你更加积极地面对生活。当你觉得你的力量足够影响他们，那就勇敢地靠近，唤醒他们沉睡的灵魂。

丧文化盛极一时，只有正能量能改变灰色的城市。当人群中积蓄的能量足够强大时，所谓“丧”自然会被感染，阴霾也会散去，城市也会恢复阳光灿烂的模样。

所以我们计划开发一个Android平台的战斗冒险类游戏BallGame，以红球、灰球、黑球分别代表正能量、普通能量、负能量，以及它们之间的相互作用来模拟现实生活中人们受周围同伴情绪感染这一现象。

## 1.3 玩法介绍

- 开始游戏，先初始化游戏地图，创建主角、小红球、小灰球和小黑球，这时各类球体都是处于自由状态，通过控制摇杆来控制主角的移动状态，引导碰撞灰球、躲避小黑球和黑球，指示UI上实时更新显示的红灰黑球比例。本阶段如果主角碰撞到小黑球，主角就会死亡，游戏失败。如果主角碰撞小灰球，小灰球变成小红球，当场上小红球达到一定数量，就可以按下合体键，第一次按下合体键，游戏就会进入第二阶段。
- 第二阶段开始时，主角处于合体状态， boss（大黑球）出现，但是合体后的主角体积依然小于boss。地图上会随机出现道具（主角加速和主角冷却时间归零），主角移动碰到道具，就会即时的获得道具的功能。如果非合体的主角碰到boss就会死亡，游戏失败。如果合体的主角碰到boss，主角会立刻解体，解体后的小红球会部分变成小黑球，小红球数量减少。当主角碰撞小灰球使得小红球数量增多且合体后的主角体积大于boss时进入第三阶段。
- 第三阶段，合体状态的主角体积大于boss的体积，主角可以直接碰撞boss，而且每碰撞一次，boss会失去一次生命，缩小一定体积，主角也解体。合体主角碰撞达到三次，boss死亡，地图上的全部球体变红，游戏胜利。

## 1.4 名称定义

| 名称       | 定义                                                         |
| ---------- | ------------------------------------------------------------ |
| 玩家       | 对主角小红球进行控制操作                                     |
| 主角小红球 | 游戏内的主角，比普通小红球多了一个合体的技能                 |
| 小红球     | 除主角小红球外其他的普通小红球，可以将小灰球变为小红球，也会受小黑球影响变为小灰球或者小黑球 |
| 小灰球     | 中立角色，可以受小红球影响变为小红球                         |
| 小黑球     | 攻击角色，可以将小红球变为小灰球或小黑球                     |
| 大黑球     | 可以将其攻击范围内的小红球全部变为小灰球，将范围内的小灰球全部变为小黑球 |

## 1.5 参考资料

[1] 普莱斯曼.软件工程：实践者的研究方法(原书第8版).北京：机械工业出版社，2016

[2] metro项目：https://hot-dry-noodles.github.io/round-1.html

# 2. 系统需求概述

## 2.1 游戏系统的用例图

![BallGame系统用例图](https://i.loli.net/2021/09/18/xFdIhe4uHPMwlUJ.png)

## 2.2 用例的概要描述

| 主要参与者  | 优先级 | 用例名称                   | 用例概述                                                     |
| ----------- | ------ | -------------------------- | ------------------------------------------------------------ |
| 外部地图API | 高     | 获取实景地图               | 系统通过外部地图API获得玩家当前所处的实时地图场景并据此在游戏场景中进行重现 |
| 玩家        | 低     | 登录                       | 玩家登录游戏账号，也可以在不登录的状态下直接游戏             |
| 玩家        | 中     | 移动主角小红球             | 玩家操作主角小红球的移动                                     |
| 玩家        | 高     | 旋转方向                   | 旋转主角小红球的移动方向                                     |
| 玩家        | 高     | 加速                       | 加速主角小红球的移动速度                                     |
| 玩家        | 中     | 将小灰球变为小红球         | 主角小红球将小灰球变为小红球                                 |
| 玩家        | 中     | 战斗                       | 小红球与黑球战斗                                             |
| 玩家        | 中     | 与小黑球战斗               | 小红球会在小黑球的作用下，变为小灰球或者小黑球               |
| 玩家        | 高     | 与大黑球战斗               | 进入大黑球的攻击范围之后，主角小红球与大黑球进行战斗         |
| 玩家        | 高     | 合体                       | 在场上小红球数量达到一定数量且玩家按下合体键后，主角小红球与普通小红球合体，提及增大，持续n1时间 |
|             | 高     | 检查场上小红球的数量       | 判断场上小红球数量是否达到允许合体的预置数量                 |
|             | 高     | 冷却（恢复合体之前的状态） | 在合体时间结束的时候，进入冷却阶段，即合体后的体积增大的红球重新分解冷却为原主角小红球和普通小红球 |

## 2.3 合体用例的详细描述

| 用况名   | 合体                                                         |
| -------- | ------------------------------------------------------------ |
| 描述     | 当场上小红球达到一定数量，主角可以选择按下合体键与其他小红球合体增大体积，若进入大黑球攻击范围就与之战斗 |
| 参与者   | 玩家                                                         |
| 包含     | 检查小红球是否达到预置数量                                   |
| 扩展     | 如果合体后小红球进入大黑球攻击范围内，则进入战斗用况         |
| 泛化     | 无                                                           |
| 前置条件 | ①玩家按下合体键；②场上小红球达到所要求的数量                 |
| 细节     | （1）基本流：玩家按下合体键，系统检查场上小红球是否已经达到所要求的数量，如果满足要求，主角小红球与其他小红球合体，体积增大，该用况结束；（2）可选流：玩家按下合体键，但是场上小红球数量尚未满足要求，不执行合体操作 （3）可选流：场上小红球满足数量，玩家尚未按下合体键，不执行合体操作 （4）可选流：玩家按键时，红球已经是合体状态或处于上一次合体后的冷却状态，不执行合体操作 |
| 后置条件 | 合体成功，主角小红球体积增大                                 |
| 例外     | ①玩家按下合体键且场上小红球数量足够，但系统异常无响应；②场上小红球数量不足；③场上小红球数量足够，但是玩家尚未按下合体键 |
| 限制     | 在红球处于合体状态或者合体成功后的冷却状态时按下合体键无效；合体后的n秒内不碰撞会自动解体 |
| 注释     | 无                                                           |

## 2.4 假设和依赖

- 运行游戏的设备需要联网以获得实景地图以提供游戏场景
- 必须使用智能化的触摸屏的Android设备

# 3. 软件功能需求

## 3.1 游戏开始界面

选择难度，玩家进入游戏。

## 3.2 红球移动

玩家通过控制手机轮盘控制红球移动方向。

## 3.3 拾取道具

玩家控制红球移动到道具出现地点拾取道具。

## 3.4 使用道具

玩家在拾取道具后即刻使用，获取加速等效果。

## 3.5 获取能量

玩家控制红球移动到地图上灰球位置，使得灰球变成小红球围绕在红球周围，增加能量。

## 3.6 合体

当能量达到要求后，玩家按合体键，控制的红球与周围小红球合成一个大红球。

## 3.7 战斗

玩家在红球处于合体状态时并且体积比大黑球大时，能够向大黑球发起攻击。

| 触发条件                   | 攻击效果               |
| -------------------------- | ---------------------- |
| 红球合体体积小于等于大黑球 | 红球合体解体，能量降低 |
| 红球合体体积大于大黑球     | 黑球生命减一           |

## 3.8 判定游戏胜利

 当场上无大黑球与小黑球时游戏胜利。

# 4. 非功能需求

## 4.1 安全性

  游戏访问安全，数据加密。

## 4.2 响应速度

  及时响应，实时预览。

## 4.3 输入输出要求

  手机触屏输入。

## 4.4 故障处理要求

  游戏故障或者需要增加新的功能时，提前在游戏开始界面发布公告。

## 4.5 其他的特殊需求

  暂无特殊需求。

# 5. 运行环境规定

运行平台：Android平台

开发平台：Visual Studio 2019、Unity 2019.3.8

项目版本管理工具：Github

# 6. 验收验证标准

## 6.1 界面验收标准

| 序号 | 界面名称 | 界面描述及预期效果                                           |
| :--: | :------: | ------------------------------------------------------------ |
|  1   | 登录界面 | 显示PLAY（开始游戏）框和EXIT（退出游戏）框                   |
|  2   | 说明界面 | 显示控制键，另外用文字说明控制键的用法；显示合体键，当合体键亮起时就可以按下进行球群合体；显示点击跳过框 |
|  3   | 游戏界面 | 显示游戏大地图和小地图，主角（大红球）、小红球、小灰球和小黑球的预开始状态，摇杆，合体按钮，游戏进度条以及比例条。随机出现的道具（主角加速工具和合体冷却时间归零工具） |

## 6.2 功能验收标准

| 序号 | 功能名称 | 详细操作   | 预期效果                                                     |
| :--: | :------: | ---------- | ------------------------------------------------------------ |
|  1   | 开始游戏 | 点击PLAY键 | 进入游戏界面                                                 |
|  2   | 退出游戏 | 点击EXIT键 | 退出游戏                                                     |
|  3   |   碰撞   | 控制摇杆   | 主角碰撞小灰球，使小灰球变小红球；第一阶段主角碰到小黑球就会死亡；第二阶段合体的主角碰撞BOSS，主角解体，部分小红球变小黑球，非合体的主角碰到BOSS就会死亡；当主角碰撞小灰球，使小灰球变成小红球，小红球数量达到合体时主角体积大于BOSS时进入第三阶段；第三阶段，当合体主角碰撞BOSS数次达到3次，地图上全部的球变成红球 |
|  4   |   合体   | 按下合体键 | 主角周围的小红球全部进入主角内合体成一个更大的主角           |
|  5   | 拾取工具 | 控制摇杆   | 主角在摇杆的控制下，移动碰到道具，就可以获得道具的性能（主角加速工具或合体冷却时间归零工具） |

# 7. 迭代Ⅰ阶段团队分工

晋硕：UI 设计，提供部分美术素材

姜苏庭：生成地图 ，摇杆和小球的移动 ，锁定相机镜头调整手感，部分特效和画面色调材质颜色的修改

廖梦恬：设计小球碰撞，合体等整体的游戏逻辑和代码架构

周华丽：README文档和需求分析文档第1,2节；充当用户的角色

沈之雯：需求分析文档第3,4节；充当用户的角色

钟桔爱：需求分析文档第5,6,7节；充当用户的角色
